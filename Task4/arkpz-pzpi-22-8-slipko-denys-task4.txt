–ú—ñ–Ω—ñ—Å—Ç–µ—Ä—Å—Ç–≤–æ –æ—Å–≤—ñ—Ç–∏ —Ç–∞ –Ω–∞—É–∫–∏ –£–∫—Ä–∞—ó–Ω–∏ –•–∞—Ä–∫—ñ–≤—Å—å–∫–∏–π –Ω–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π —É–Ω—ñ–≤–µ—Ä—Å–∏—Ç–µ—Ç —Ä–∞–¥—ñ–æ–µ–ª–µ–∫—Ç—Ä–æ–Ω—ñ–∫–∏


–ö–∞—Ñ–µ–¥—Ä–∞ –ü–Ü



–ó–≤—ñ—Ç
–ó –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ 4
–¢–µ–º–∞ —Ä–æ–±–æ—Ç–∏: ¬´–†–û–ó–†–û–ë–ö–ê IoT –ö–õ–Ü–Ñ–ù–¢–ê 
(–ë–Ü–ó–ù–ï–°-–õ–û–ì–Ü–ö–ò –¢–ê –§–£–ù–ö–¶–Ü–ô –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø)¬ª
–∑ –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏ ¬´–ê–Ω–∞–ª—ñ–∑ —Ç–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥—É¬ª






–í–∏–∫–æ–Ω–∞–≤:	–ü–µ—Ä–µ–≤—ñ—Ä–∏–≤:
—Å—Ç. –≥—Ä. –ü–ó–ü–Ü-22-8	—Å—Ç. –≤–∏–∫–ª–∞–¥–∞—á –°–æ–∫–æ—Ä—á—É–∫ –Ü.–ü.
–°–ª—ñ–ø–∫–æ –î.–í.	 











–•–∞—Ä–∫—ñ–≤ 2024
 
–ú–µ—Ç–∞ —Ä–æ–±–æ—Ç–∏: –ù–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ñ–π —Ä–æ–±–æ—Ç—ñ ‚Ññ4 –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ä–æ–∑—Ä–æ–±–∏—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–Ω–µ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –¥–ª—è  IoT –∞–±–æ SmartDevice –ø—Ä–∏—Å—Ç—Ä–æ—é, —Å—Ç–≤–æ—Ä–µ–Ω–æ–≥–æ –Ω–∞ –±–∞–∑—ñ –±—É–¥—å-—è–∫–æ—ó –ø–æ—à–∏—Ä–µ–Ω–æ—ó –Ω–∞  —Å—å–æ–≥–æ–¥–Ω—ñ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏, –ø—Ä–∏–¥–∞—Ç–Ω–æ—ó –¥–ª—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –≤–±—É–¥–æ–≤–∞–Ω–∏—Ö —Å–∏—Å—Ç–µ–º (Embedded  System).
–•—ñ–¥ —Ä–æ–±–æ—Ç–∏: 
–ü—Ä–æ–µ–∫—Ç –ø–æ–ª—è–≥–∞–≤ —É —Ä–æ–∑—Ä–æ–±—Ü—ñ –ø—Ä–æ–≥—Ä–∞–º–Ω–æ–≥–æ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –¥–ª—è –Ü–æ–¢ –∫–ª—ñ—î–Ω—Ç–∞, —è–∫–∏–π –∑–±–∏—Ä–∞—î –¥–∞–Ω—ñ –∑ –¥–∞—Ç—á–∏–∫—ñ–≤ —ñ –ø–µ—Ä–µ–¥–∞—î —ó—Ö —á–µ—Ä–µ–∑ MQTT –Ω–∞ —Å–µ—Ä–≤–µ—Ä. –°–ø–æ—á–∞—Ç–∫—É –±—É–ª–∞ —Å—Ç–≤–æ—Ä–µ–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Ç–∞ UML –¥—ñ–∞–≥—Ä–∞–º–∏ –¥–ª—è –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó –ø—Ä–æ—Ü–µ—Å—ñ–≤ —ñ –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ —Å–∏—Å—Ç–µ–º–æ—é. –ü–æ—Ç—ñ–º —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∞ –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –¥–∞–Ω–∏—Ö, –ø—Ä–æ–≥—Ä–∞–º–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ñ—É–Ω–∫—Ü—ñ–π –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –æ–±—Ä–æ–±–∫–∏ –æ—Ç—Ä–∏–º–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö. –ó–∞–≤–µ—Ä—à–∞–ª—å–Ω–∏–º –µ—Ç–∞–ø–æ–º –±—É–ª–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ü–æ–¢ –∫–ª—ñ—î–Ω—Ç–∞ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –π–æ–≥–æ –∫–æ—Ä–µ–∫—Ç–Ω–æ—ó —Ä–æ–±–æ—Ç–∏.
1.	–¢–µ–∫—Å—Ç–æ–≤–∏–π –æ–ø–∏—Å —ñ–Ω–∂–µ–Ω–µ—Ä–Ω–∏—Ö —Ä—ñ—à–µ–Ω—å
–£ –ø—Ä–æ—î–∫—Ç—ñ –±—É–ª–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ —Å–∏—Å—Ç–µ–º—É –∑–±–æ—Ä—É, –æ–±—Ä–æ–±–∫–∏ —Ç–∞ –ø–µ—Ä–µ–¥–∞—á—ñ –¥–∞–Ω–∏—Ö –≤—ñ–¥ —Å–µ–Ω—Å–æ—Ä—ñ–≤, —â–æ –¥–æ–∑–≤–æ–ª—è—î –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –Ω–∞–≤–∫–æ–ª–∏—à–Ω—î —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ —Ç–∞ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ —ó—ó –Ω–∞ –≤—ñ–¥–¥–∞–ª–µ–Ω–∏–π —Å–µ—Ä–≤–µ—Ä. –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –±–∞–∑—É—î—Ç—å—Å—è –Ω–∞ –±–µ–∑–¥—Ä–æ—Ç–æ–≤–æ–º—É –º–æ–¥—É–ª—ñ, —è–∫–∏–π –∑–∞–±–µ–∑–ø–µ—á—É—î –µ—Ñ–µ–∫—Ç–∏–≤–Ω—É –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—é, –∞ –∞–ª–≥–æ—Ä–∏—Ç–º–∏ –æ–±—Ä–æ–±–∫–∏ —Å–∏–≥–Ω–∞–ª—ñ–≤ –∞–¥–∞–ø—Ç—É—é—Ç—å—Å—è –¥–æ –∑–º—ñ–Ω–Ω–∏—Ö —É–º–æ–≤ –¥–ª—è –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è —Ç–æ—á–Ω–æ—Å—Ç—ñ. –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–∏—Ö –æ—Ä–≥–∞–Ω—ñ–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ –Ω–∞–¥—ñ–π–Ω–∏–π –∫–∞–Ω–∞–ª –∑–≤‚Äô—è–∑–∫—É, —â–æ –º—ñ–Ω—ñ–º—ñ–∑—É—î –∑–∞—Ç—Ä–∏–º–∫–∏ —Ç–∞ –≥–∞—Ä–∞–Ω—Ç—É—î —ó—Ö–Ω—é –∫–æ—Ä–µ–∫—Ç–Ω—ñ—Å—Ç—å, –∞ –≤—Å—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø–Ω—ñ —á–µ—Ä–µ–∑ —ñ–Ω—Ç—É—ó—Ç–∏–≤–Ω–æ –∑—Ä–æ–∑—É–º—ñ–ª–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —â–æ –Ω–µ –≤–∏–º–∞–≥–∞—î –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó —Ç–µ—Ö–Ω—ñ—á–Ω–æ—ó –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∏.
 
–†–∏—Å—É–Ω–æ–∫ 1 ‚Äì –°—Ö–µ–º–∞ IoT –ø—Ä–∏—Å—Ç—Ä–æ—é

2.	–§—Ä–∞–≥–º–µ–Ω—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–Ω–æ–≥–æ –∫–æ–¥—É:
ÔÄ≠	–ë—ñ–∑–Ω–µ—Å –ª–æ–≥—ñ–∫–∏ IoT –∫–ª—ñ—î–Ω—Ç–∞  (–º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏ –ø–æ–≤ º—è–∑–∞–Ω–∏—Ö —ñ–∑ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ—é –æ–±–ª–∞—Å—Ç—é –¥–∞–Ω–∏—Ö); 
1  void setupWiFi() {
    Serial.println("üîÑ –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ WiFi...");
    WiFi.begin(ssid, password);
    while (WiFi.status() != WL_CONNECTED) {
        delay(500);
        Serial.print(".");
    }
    Serial.println("\n WiFi –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ!");
}

void reconnectMQTT() {
    while (!client.connected()) {
        Serial.println(" –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ MQTT...");
        if (client.connect("ESP32Client")) {
            Serial.println(" MQTT –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ!");
        } else {
            Serial.print(" –ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è. –ö–æ–¥: ");
            Serial.println(client.state());
            delay(5000);
        }
    }
}

float getDistance() {
    digitalWrite(TRIG_PIN, LOW);
    delayMicroseconds(2);
    digitalWrite(TRIG_PIN, HIGH);
    delayMicroseconds(10);
    digitalWrite(TRIG_PIN, LOW);
    float duration = pulseIn(ECHO_PIN, HIGH);
    return duration * 0.034 / 2; // –í—ñ–¥—Å—Ç–∞–Ω—å —É —Å–º
}

void sendGPSData() {
    float distance = getDistance();

    // –°–∏–º—É–ª—è—Ü—ñ—è GPS-–∑–º—ñ–Ω–∏
    float latitude = baseLatitude + (distance * 0.0001);
    float longitude = baseLongitude + (distance * 0.0001);

    StaticJsonDocument<200> jsonDoc;
    jsonDoc["vehicle_id"] = vehicle_id;
    jsonDoc["latitude"] = latitude;
    jsonDoc["longitude"] = longitude;

    char jsonBuffer[200];
    serializeJson(jsonDoc, jsonBuffer);

    // –í—ñ–¥–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ MQTT
    client.publish(mqtt_topic, jsonBuffer);
    Serial.println("üì° GPS-–¥–∞–Ω—ñ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω—ñ —á–µ—Ä–µ–∑ MQTT");
3.	–ì—Ä–∞—Ñ—ñ—á–Ω—ñ —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ—ó (—Ä–∏—Å—É–Ω–∫–∏):
ÔÄ≠	UML –¥—ñ–∞–≥—Ä–∞–º–∞ –ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç—ñ–≤ –Ü–æ–¢ –∫–ª—ñ—î–Ω—Ç–∞.
 
–†–∏—Å—É–Ω–æ–∫ 2 ‚Äì UML –¥—ñ–∞–≥—Ä–∞–º–∞ –ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç—ñ–≤ –Ü–æ–¢ –∫–ª—ñ—î–Ω—Ç–∞
ÔÄ≠	UML –¥—ñ–∞–≥—Ä–∞–º–∞ –¥—ñ—è–ª—å–Ω–æ—Å—Ç—ñ –Ü–æ–¢ –∫–ª—ñ—î–Ω—Ç–∞.
 
–†–∏—Å—É–Ω–æ–∫ 3 ‚Äì UML –¥—ñ–∞–≥—Ä–∞–º–∞ –¥—ñ—è–ª—å–Ω–æ—Å—Ç—ñ –Ü–æ–¢ –∫–ª—ñ—î–Ω—Ç–∞

–í–∏—Å–Ω–æ–≤–∫–∏: –£ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ –≤–∏–∫–æ–Ω–∞–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –±—É–ª–æ —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–æ –Ü–æ–¢ –∫–ª—ñ—î–Ω—Ç–∞ –¥–ª—è –∑–±–æ—Ä—É —Ç–∞ –ø–µ—Ä–µ–¥–∞—á—ñ –¥–∞–Ω–∏—Ö –∑ –¥–≤–æ—Ö –¥–∞—Ç—á–∏–∫—ñ–≤ –¥–∏—Å—Ç–∞–Ω—Ü—ñ—ó ‚Äî —Å–ø–µ—Ä–µ–¥—É —Ç–∞ –∑–∑–∞–¥—É. –°—Ç–≤–æ—Ä–µ–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º–∏, —è–∫–∞ –∑–∞–±–µ–∑–ø–µ—á—É—î –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è –≤—ñ–¥—Å—Ç–∞–Ω—ñ –∑ –æ–±–æ—Ö –¥–∞—Ç—á–∏–∫—ñ–≤ —Ç–∞ —ó—Ö –ø–æ–¥–∞–ª—å—à—É –ø–µ—Ä–µ–¥–∞—á—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ MQTT. –ë—É–ª–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫—É –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –æ—Ç—Ä–∏–º–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤. –ü—Ä–æ–≥—Ä–∞–º–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä—É–≤–∞–ª–∞ —Å—Ç–∞–±—ñ–ª—å–Ω—É —Ä–æ–±–æ—Ç—É –∑ –¥–∞—Ç—á–∏–∫–∞–º–∏ —Ç–∞ –Ω–∞–¥—ñ–π–Ω—É –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–∏—Ö, —â–æ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏–ª–æ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–æ–≥–æ —Ä—ñ—à–µ–Ω–Ω—è –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –Ü–æ–¢ —Å–∏—Å—Ç–µ–º–∞—Ö –∑ –¥–∞—Ç—á–∏–∫–∞–º–∏ –¥–∏—Å—Ç–∞–Ω—Ü—ñ—ó.
–ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –≤—ñ–¥–µ–æ: https://www.youtube.com/watch?v=Npesv8ct-N4







